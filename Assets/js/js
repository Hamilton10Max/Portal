// All variables
let currentInput = '0';
let previousInput = '';
let operation = null;
let history = [];
let mode = 'standard';
// ... all other variables ...

// All functions
function updateDisplay() { ... }
function appendNumber(num) { ... }
function appendOperator(op) { ... }
// ... all other functions: calculate, clearAll, backspace, toggleMode, etc. ...

// All event listeners and initialization code at the bottom
updateTime();
setInterval(updateTime, 60000);
updateDisplay();

// Prevent text selection, etc.
const resultElement = document.getElementById('result');
// ... all the event listeners and final setup code ...